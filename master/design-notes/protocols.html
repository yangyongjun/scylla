


<!doctype html>
<html class="no-js" lang="en">
  
<head><!-- begin head.html -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
    Ports and protocols in Scylla | Scylla Docs
    </title>
    <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server."/>

    <link rel="icon" href="../_static/img/favicon.ico" type="image/x-icon"/>
    <link rel="canonical" href="https://docs.scylladb.com/">

    <link rel="author" href="mailto:info@scylladb.com">
    <link rel="stylesheet" href="../_static/" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_tabs/tabs.css" />
    
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/doc/main.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>

    <script src="../_static/js/vendor/modernizr.js"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T8P2JP');</script>
    <!-- End Google Tag Manager -->

    <!-- Marketo -->
    <script type="text/javascript"> (function() { var didInit = false; function initMunchkin() { if(didInit === false) { didInit = true; Munchkin.init('791-QBF-350'); } } var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//munchkin.marketo.net/munchkin.js'; s.onreadystatechange = function() { if (this.readyState == 'complete' || this.readyState == 'loaded') { initMunchkin(); } }; s.onload = initMunchkin; document.getElementsByTagName('head')[0].appendChild(s); })(); </script>
    <!-- End Marketo -->

<!-- end head.html -->
</head>

<body>



<header id="header" class="animated">
    <div class="topbar_continer contain-to-grid clearfix">
        <nav class="top-bar" id="top-bar" data-topbar role="navigation">
            <ul class="title-area">
                <li class="name">
                    <div class="logo">
                        <a href="https://docs.scylladb.com/"><img src="../_static/img/logo-scylla-docs.svg" alt="" width="151"></a>
                    </div>
                </li>
                <li class="toggle-topbar"><a href="#"><span class="icon-manu"></span></a></li>
            </ul>
            <section class="top-bar-section clearfix">
                <ul class="right">
                    
                    <li>
                        <a href="https://scylla.docs.scylladb.com">Scylla Developer Notes</a>
                    </li>
                    
                    <li>
                        <a href="https://university.scylladb.com/">Scylla University</a>
                    </li>
                    
                    <li>
                        <a href="https://www.scylladb.com/">ScyllaDB Home</a>
                    </li>
                    
                    <li class="search_continer show-for-medium-up">	
                        <ci-search></ci-search>	
                    </li>	
                </ul>
            </section>
        </nav>
    </div>
</header>
<section id="content">
    <div class="row">
	
	<div class="large-6 large-push-3 columns">

        

        <section id="ports-and-protocols-in-scylla">
<h1>Ports and protocols in Scylla<a class="headerlink" href="#ports-and-protocols-in-scylla" title="Permalink to this headline">¶</a></h1>
<p>Scylla is a distributed system, with multiple Scylla nodes communicating
with each other and with client nodes making requests. All these different
nodes use many different protocols and TCP ports (currently, all use TCP)
to communicate with each other. Some of these protocols have an external
specification - for example Scylla supports Cassandra’s CQL protocol and
Amazon’s DynamoDB protocol for client requests. Other protocols, both
client-facing and internal (between Scylla nodes), are Scylla-defined.</p>
<p>The goal of this document is to survey all these different protocols -
what goes over which protocol, which port each protocol uses (and how this
can be configured), how to disable or enable some of the protocols, and what
part of the Scylla source code handles which protocol.</p>
<p>Unfortunately, the long evolution of some of these protocols resulted in
some of them getting confusing names, and often different names in Scylla’s
code, documentation and configuration. This document aims to clear up some
of this confusion.</p>
<p>The Wireshark tool can be used to inspect and understand the messages sent
over many of the following protocols. This includes even Scylla’s internal
inter-node protocol - for instructions and examples check out the blog post:
https://www.scylladb.com/2020/05/21/dissecting-scylla-packets-with-wireshark/</p>
<section id="internal-communication">
<h2>Internal communication<a class="headerlink" href="#internal-communication" title="Permalink to this headline">¶</a></h2>
<p>All inter-node communiction - communication between the Scylla nodes
themselves - happen over one protocol and one TCP port - by default port 7000
(unencrypted) or 7001 (encrypted). These are the same TCP ports used by
Cassandra for this purpose, but Scylla’s internal protocol is completely
different from Cassandra, and incompatible with it (one cannot mix Scylla
and Cassandra nodes in a single cluster).</p>
<p>Scylla’s internal protocol is built on top of Seastar’s “RPC” messaging
mechanism, itself built on top of TCP. This protocol includes messages of
different types (”verbs”) - which are all listed in the source file
<code class="docutils literal notranslate"><span class="pre">message/messaging_service.cc</span></code>.</p>
<p>Here is a non-exhaustive list of things that Scylla does with these messages:</p>
<ul class="simple">
<li><p>“Gossip” between the nodes to maintain knowledge of the cluster topology:
Which nodes belong to the cluster, their state and token ownership.</p></li>
<li><p>Read and write (mutation) messages sent from a node receiving a client’s
request (a so-called coordinator) to a replica which holds relevant data.</p></li>
<li><p>In particular, mutations to special system tables are used to maintain
cluster-wide agreement on schemas (table definitions).</p></li>
<li><p>Streaming data to new nodes and repairing data between nodes.</p></li>
<li><p>Messages used to implement LWT (lightweight transactions).</p></li>
</ul>
<p>Although all these different types of messages use the same RPC protocol and
the same destination port on the receiver, we don’t want to multiplex all of
these messages over a <em>single</em> TCP connection. If we do, this would allow
messages of one type to severely delay messages of other types (head-of-line
blocking).  So Scylla opens several sockets to the same destination port
and uses a different socket for different message types.  The function
<code class="docutils literal notranslate"><span class="pre">do_get_rpc_client_idx</span></code> determines which types of messages get bunched
together over one socket. As of this writing, the different messages are
split into four sockets.</p>
<p>As everything in Scylla, the messaging service (providing this internal
communication) is a sharded service, so each shard keeps its own sockets
to each remote node. The remote node is also sharded. We cannot know for
sure which shard on the remote node will handle the messages, but we make
an effort (which is not a guarantee!) that if the two nodes have the same
number of shards, messages from shard N in the source node arrive to shard
N in the destination node.</p>
<p>Port 7000 is the default port for Scylla’s internal communication. This choice
can be overriden by the <code class="docutils literal notranslate"><span class="pre">storage_port</span></code> configuration option. This awkward
name, <code class="docutils literal notranslate"><span class="pre">storage_port</span></code>, was kept for backward compatibility with Cassandra’s
YAML configuration file. In very early Cassandra versions, this port was
used <em>only</em> for “storage” messages (read and write), and other messages such
as gossip were sent to a different port. So today we are still stuck with
this outdated name of this configuration option.</p>
<p>There is also a <code class="docutils literal notranslate"><span class="pre">listen_address</span></code> configuration option to set the IP address
(and therefore network interface) on which Scylla should listen for the
internal protocol. This address defaults to <code class="docutils literal notranslate"><span class="pre">localhost</span></code>, but in any
setup except a one-node test, should be overriden.</p>
<p>TODO: there is also <code class="docutils literal notranslate"><span class="pre">listen_interface</span></code> option… Which wins? What’s the default?
TODO: mention SSL, how it is configured, and <code class="docutils literal notranslate"><span class="pre">ssl_storage_port</span></code> (default 7001).</p>
</section>
<section id="cql-client-protocol">
<h2>CQL client protocol<a class="headerlink" href="#cql-client-protocol" title="Permalink to this headline">¶</a></h2>
<p>The CQL binary protocol is Cassandra’s and Scylla’s main client-facing
protocol. Scylla supports several Scylla-only extensions to this protocol,
described in <a class="reference internal" href="protocol-extensions.html"><span class="doc">protocol-extensions.md</span></a>.</p>
<p>By default, Scylla listens to the CQL protocol on port 9042, which can be
configured via the <code class="docutils literal notranslate"><span class="pre">native_transport_port</span></code> configuration option. If set
to 0, the OS will choose the port randomly (which also applies to every CQL
port discussed later). To explicitly disable listening on a CQL port one
should set its value to <code class="docutils literal notranslate"><span class="pre">~</span></code> , or <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>Scylla also supports the CQL protocol via TLS/SSL encryption which is
disabled by default and can be enabled via the <code class="docutils literal notranslate"><span class="pre">native_transport_port_ssl</span></code>
configuration option. Traditional choice for the port for secure
connections is 9142, but if <code class="docutils literal notranslate"><span class="pre">client_encryption_options</span></code> are specified and
<code class="docutils literal notranslate"><span class="pre">native_transport_port_ssl</span></code> is not, then <code class="docutils literal notranslate"><span class="pre">native_transport_port</span></code> will
handle encrypted connections only. The same thing happens when
<code class="docutils literal notranslate"><span class="pre">native_transport_port</span></code> and <code class="docutils literal notranslate"><span class="pre">native_transport_port_ssl</span></code> are set to the same
value. The rules governing port assignment/encryption are summed up in
the table below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span>  <span class="p">:</span><span class="o">=</span> <span class="n">native_transport_port</span> <span class="ow">is</span> <span class="nb">set</span>
<span class="n">nps</span> <span class="p">:</span><span class="o">=</span> <span class="n">native_transport_port_ssl</span> <span class="ow">is</span> <span class="nb">set</span>
<span class="n">ceo</span> <span class="p">:</span><span class="o">=</span> <span class="n">client_encryption_options</span> <span class="n">are</span> <span class="n">enabled</span>
<span class="n">eq</span>  <span class="p">:</span><span class="o">=</span> <span class="n">native_transport_port_ssl</span> <span class="o">==</span> <span class="n">native_transport_port</span>

<span class="o">+-----+-----+-----+-----+</span>
<span class="o">|</span>  <span class="n">np</span> <span class="o">|</span> <span class="n">nps</span> <span class="o">|</span> <span class="n">ceo</span> <span class="o">|</span>  <span class="n">eq</span> <span class="o">|</span>
<span class="o">+-----+-----+-----+-----+</span>
<span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="o">*</span>  <span class="o">|</span>   <span class="o">=&gt;</span>   <span class="n">listen</span> <span class="n">on</span> <span class="n">native_transport_port</span><span class="p">,</span> <span class="n">unencrypted</span>
<span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="o">*</span>  <span class="o">|</span>   <span class="o">=&gt;</span>   <span class="n">listen</span> <span class="n">on</span> <span class="n">native_transport_port</span><span class="p">,</span> <span class="n">encrypted</span>
<span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="o">*</span>  <span class="o">|</span>   <span class="o">=&gt;</span>   <span class="n">don</span><span class="s1">&#39;t listen</span>
<span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="o">*</span>  <span class="o">|</span>   <span class="o">=&gt;</span>   <span class="n">listen</span> <span class="n">on</span> <span class="n">native_transport_port_ssl</span><span class="p">,</span> <span class="n">encrypted</span>
<span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="o">*</span>  <span class="o">|</span>   <span class="o">=&gt;</span>   <span class="n">listen</span> <span class="n">on</span> <span class="n">native_transport_port</span><span class="p">,</span> <span class="n">unencrypted</span>
<span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="o">*</span>  <span class="o">|</span>   <span class="o">=&gt;</span>   <span class="n">listen</span> <span class="n">on</span> <span class="n">native_transport_port</span><span class="p">,</span> <span class="n">encrypted</span>
<span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>  <span class="o">*</span>  <span class="o">|</span>   <span class="o">=&gt;</span>   <span class="n">listen</span> <span class="n">on</span> <span class="n">native_transport_port</span><span class="p">,</span> <span class="n">unencrypted</span>
<span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">0</span>  <span class="o">|</span>   <span class="o">=&gt;</span>   <span class="n">listen</span> <span class="n">on</span> <span class="n">native_transport_port</span><span class="p">,</span> <span class="n">unencrypted</span> <span class="o">+</span> <span class="n">native_transport_port_ssl</span><span class="p">,</span> <span class="n">encrypted</span>
<span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>   <span class="o">=&gt;</span>   <span class="n">listen</span> <span class="n">on</span> <span class="n">native_transport_port</span><span class="p">(</span><span class="n">_ssl</span> <span class="o">-</span> <span class="n">same</span> <span class="n">thing</span><span class="p">),</span> <span class="n">encrypted</span>
<span class="o">+-----+-----+-----+-----+</span>
</pre></div>
</div>
<p>To allow “advanced shard-awareness” Scylla can accept CQL connections on
additional port(s): <code class="docutils literal notranslate"><span class="pre">native_shard_aware_transport_port</span></code> (by default 19042)
and <code class="docutils literal notranslate"><span class="pre">native_shard_aware_transport_port_ssl</span></code> (encrypted, disabled by default
just like <code class="docutils literal notranslate"><span class="pre">native_transport_port_ssl</span></code>). The typical choice for
<code class="docutils literal notranslate"><span class="pre">native_shard_aware_transport_port_ssl</span></code> is 19142.</p>
<p>Both shard-aware ports work almost identically as their non-shard-aware
counterparts, with only one difference: client connections arriving on
“shard-aware” ports are routed to specific shards, determined by the
client-side (local) port numbers. This feature is enabled by default and can
be disabled by setting <code class="docutils literal notranslate"><span class="pre">enable_shard_aware_drivers:</span> <span class="pre">false</span></code>.</p>
<p>The CQL protocol support can be disabled altogether by setting the
<code class="docutils literal notranslate"><span class="pre">start_native_transport</span></code> option to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>These option names were chosen for backward-compatibility with Cassandra
configuration files: they refer to CQL as the “native transport”, to
contrast with the older Thrift protocol (described below) which wasn’t
native to Cassandra.</p>
<p>There is also a <code class="docutils literal notranslate"><span class="pre">rpc_address</span></code> configuration option to set the IP address
(and therefore network interface) on which Scylla should listen for the
CQL protocol. This address defaults to <code class="docutils literal notranslate"><span class="pre">localhost</span></code>, but in any setup except
a one-node test, should be overriden. Note that the same option <code class="docutils literal notranslate"><span class="pre">rpc_address</span></code>
applies to both CQL and Thrift protocols.</p>
<p>TODO: there is also <code class="docutils literal notranslate"><span class="pre">rpc_interface</span></code> option… Which wins? What’s the default?</p>
</section>
<section id="thrift-client-protocol">
<h2>Thrift client protocol<a class="headerlink" href="#thrift-client-protocol" title="Permalink to this headline">¶</a></h2>
<p>The Apache Thrift protocol was early Cassandra’s client protocol, until
it was superceded in Cassandra 1.2 with the binary CQL protocol. Thrift
was still nominally supported by both Cassandra and Scylla for many years,
but was recently dropped in Cassandra (version 4.0) and is likely to be
dropped by Scylla in the future as well, so it is not recommended for new
applications.</p>
<p>By default, Scylla does not enable the Thrift server. In order to use it,
it must be explicitly enabled by setting the <code class="docutils literal notranslate"><span class="pre">start_rpc</span></code> configuration option
to true.</p>
<p>When Thrift is enabled, by default scylla listens to the Thrift protocol on port 9160,
which can be configured via the <code class="docutils literal notranslate"><span class="pre">rpc_port</span></code> configuration option. Again, this confusing
name was used for backward-compatibility with Cassandra’s configuration files.
Cassandra used the term “rpc” because Apache Thrift is a remote procedure
call (RPC) framework. In Scylla, this name is especially confusing, because
as mentioned above, Scylla’s internal communication protocol is based on
Seastar’s RPC, which has nothing to do with the “<code class="docutils literal notranslate"><span class="pre">rpc_port</span></code>” described here.</p>
<p>There is also a <code class="docutils literal notranslate"><span class="pre">rpc_address</span></code> configuration option to set the IP address
(and therefore network interface) on which Scylla should listen for the
Thrift protocol. This address defaults to <code class="docutils literal notranslate"><span class="pre">localhost</span></code>, but in any
setup except a one-node test, should be overriden. Note that the same
option <code class="docutils literal notranslate"><span class="pre">rpc_address</span></code> applies to both CQL and Thrift protocols.</p>
<p>TODO: there is also <code class="docutils literal notranslate"><span class="pre">rpc_interface</span></code> option… Which wins? What’s the default?
TODO: is there an SSL version of Thrift?</p>
</section>
<section id="dynamodb-client-protocol">
<h2>DynamoDB client protocol<a class="headerlink" href="#dynamodb-client-protocol" title="Permalink to this headline">¶</a></h2>
<p>Scylla also supports Amazon’s DynamoDB API. The DynamoDB API is a JSON over
HTTP (unencrypted) or HTTPS (encrypted) protocol. Support for this protocol
is not turned on by default, and must be turned on manually by setting
the <code class="docutils literal notranslate"><span class="pre">alternator_port</span></code> and/or <code class="docutils literal notranslate"><span class="pre">alternator_https_port</span></code> configuration options.
“Alternator” is the codename of Scylla’s DynamoDB API support, and is
documented in more detail in <a class="reference internal" href="../alternator/alternator.html"><span class="doc">alternator.md</span></a>.</p>
<p>The standard ports that DynamoDB uses are the standard HTTP and HTTPS
ports (80 and 443, respectively), but in tests we usually use the
unprivileged port numbers 8000 and 8043 instead.</p>
<p>There is also an <code class="docutils literal notranslate"><span class="pre">alternator_address</span></code> configuration option to set the IP
address (and therefore network interface) on which Scylla should listen
for the DynamoDB protocol. This address defaults to 0.0.0.0.</p>
<p>When the HTTPS-based protocol is enabled, the server also needs to know
the certificate and key files to use. The default locations of these files
are <code class="docutils literal notranslate"><span class="pre">/etc/scylla/scylla.crt</span></code> and <code class="docutils literal notranslate"><span class="pre">/etc/scylla/scylla.key</span></code> respectively, but
can be overridden by specifying in <code class="docutils literal notranslate"><span class="pre">alternator_encryption_options</span></code> the
<code class="docutils literal notranslate"><span class="pre">keyfile</span></code> and <code class="docutils literal notranslate"><span class="pre">certificate</span></code> options. For example,
<code class="docutils literal notranslate"><span class="pre">--alternator-encryption-options</span> <span class="pre">keyfile=&quot;...&quot;</span></code>.</p>
</section>
<section id="redis-client-protocol">
<h2>Redis client protocol<a class="headerlink" href="#redis-client-protocol" title="Permalink to this headline">¶</a></h2>
<p>Scylla also has partial and experimental support for the Redis API.
Because this support is experimental, it is not turned on by
default, and must be turned on manually by setting the <code class="docutils literal notranslate"><span class="pre">redis_port</span></code>
and/or <code class="docutils literal notranslate"><span class="pre">redis_ssl_port</span></code> configuration option.</p>
<p>The traditional port used for Redis is 6379. Regular Redis does not
support SSL, so there is no traditional choice of port for it.</p>
<p>See <a class="reference internal" href="redis.html"><span class="doc">redis.md</span></a> for more information about Scylla’s
support for the Redis protocol.</p>
</section>
<section id="metrics-protocol">
<h2>Metrics protocol<a class="headerlink" href="#metrics-protocol" title="Permalink to this headline">¶</a></h2>
<p>Scylla provides an HTTP-based protocol to fetch performance and activity
metrics from Scylla, which is described in detail in <a class="reference internal" href="metrics.html"><span class="doc">metrics.md</span></a>.</p>
<p>Scylla listens by default on port 9180 for metric requests. This port number
can be configured with the <code class="docutils literal notranslate"><span class="pre">prometheus_port</span></code> configuration option, named
after the Prometheus protocol - and the Prometheus server which is usually
used to collect these metrics.</p>
<p>There is also a <code class="docutils literal notranslate"><span class="pre">prometheus_address</span></code> configuration option to set the IP
address (and therefore network interface) on which Scylla should listen
for the metrics protocol. This address defaults to 0.0.0.0.</p>
</section>
<section id="rest-api-protocol">
<h2>REST API protocol<a class="headerlink" href="#rest-api-protocol" title="Permalink to this headline">¶</a></h2>
<p>The CQL client protocol mentioned above is useful mostly for data and table
requests, but does not offer commands for <em>administrative</em> operations such
as repair, compact, adding or removing nodes, and so on. Cassandra uses
nodetool and JMX for these (see below), but Scylla’s native approach is a
RESTful API (HTTP requests).</p>
<p>Scylla listens for this REST API by default on port 10000, which can be
configured with the <code class="docutils literal notranslate"><span class="pre">api_port</span></code> configuration option.</p>
<p>The REST API has no notion of autentication of authorization, and allows
anyone connecting to it to perform destructive operations. Therefore, it
only listens for connection on the localhost (127.0.0.1) interface. This
default can be overridden by the <code class="docutils literal notranslate"><span class="pre">api_address</span></code> option - but shouldn’t.</p>
<p>The available REST API commands are listed in JSON files in the <code class="docutils literal notranslate"><span class="pre">api/api-doc/</span></code>
directory of the Scylla source. A user can explore this API interactively
by pointing a browser to http://localhost:10000/ui/.</p>
<p>There is an ongoing, but incomplete, effort to replace this REST API by
a newer, “v2”, API. See <a class="reference internal" href="../guides/api_v2.html"><span class="doc">api_v2.md</span></a>. When complete, this v2
API will be available on the same port. You can explore the little it
offers now in the aforementioned UI by replacing the URL in the box with
“http://localhost:10000/v2”.</p>
</section>
<section id="jmx">
<h2>JMX<a class="headerlink" href="#jmx" title="Permalink to this headline">¶</a></h2>
<p>The “nodetool” management command connects to Scylla using Java’s JMX
protocol, not the REST API described above. This protocol was kept for
backward compatibility with Cassandra and its unmodified “nodetool” command.
To implement the JMX protocol, we have a separate project,
<a class="reference external" href="https://github.com/scylladb/scylla-jmx">scylla-jmx</a>, which runs a Java
program which accepts the JMX requests supported by Cassandra, and translates
them to requests to our own REST API. These REST API requests are sent
to Scylla’s REST API port over the loopback (localhost) interface.</p>
<p>The port on which scylla-jmx listens is by default port 7199. This port,
and the listen address, can be overridden with the <code class="docutils literal notranslate"><span class="pre">-jp</span></code> and <code class="docutils literal notranslate"><span class="pre">-ja</span></code> options
(respectively) of the <code class="docutils literal notranslate"><span class="pre">scylla-jmx</span></code> script.</p>
</section>
</section>

        </div>

        <div id="sidebar" class="large-3 large-pull-6 columns"><div class="side-nav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Scylla Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alternator/alternator.html">Alternator: DynamoDB API in Scylla</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Design Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="IDL.html">IDL definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdc.html">CDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="compaction_controller.html">The Compaction Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="cql-extensions.html">Scylla CQL extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cql-extensions-internal.html">Scylla CQL extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cql3-type-mapping.html">CQL3 Type Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="hinted_handoff_design.html">Hinted Handoff Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="isolation.html">Performance Isolation in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="lua-type-mapping.html">CQL to Lua type mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html">Scylla Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-users-to-roles.html">Migrating from users to roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="paged-queries.html">Paged queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol-extensions.html">Protocol extensions to the Cassandra Native Protocol</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Ports and protocols in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis.html">Redis API in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="repair_based_node_ops.html">Repair based node operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="row_cache.html">Row Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="row_level_repair.html">Row level repair</a></li>
<li class="toctree-l2"><a class="reference internal" href="secondary_index.html">Secondary indexes in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="sstable-scylla-format.html">File format of the Scylla.db sstable component</a></li>
<li class="toctree-l2"><a class="reference internal" href="sstables-directory-structure.html">sstables directory structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_keyspace.html">System keyspace layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_schema_keyspace.html">System schema keyspace layout</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contribute</a></li>
</ul>

</div>
        </div>

        <div class="large-3 columns">
            
                <div class="versions-dropdown single-version">
    <button class="button">
    
        master
    
	 <i class="fa fa-caret-down" aria-hidden="true"></i>
    </button>
    <ul class="content">
            <li><a href="protocols.html">master</a></li>
    </ul>
</div>
            
        </div>

    </div>
</section>

<!-- newsleter modal -->

<div id="newsletter_signup" class="reveal-modal tiny radius dark_modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
    <a class="close-reveal-modal" aria-label="Close">×</a>
    <h2 id="modalTitle">Sign up for the Scylla newsletter</h2>
    <div id="mc_embed_signup">
        <form action="//cloudius-systems.us10.list-manage.com/subscribe/post?u=df8bb543c68230d5f7b4dcf78&amp;id=9a4589f144" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
            <div id="mc_embed_signup_scroll">

                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-EMAIL">Email</label></div>
                        <div class="small-9 columns"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-FNAME">First Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="FNAME" class="" id="mce-FNAME"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-LNAME">Last Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="LNAME" class="" id="mce-LNAME"></div>
                    </div>
                </div>
                <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display:none"></div>
                    <div class="response" id="mce-success-response" style="display:none"></div>
                </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                <div style="position: absolute; left: -5000px;"><input type="text" name="b_df8bb543c68230d5f7b4dcf78_9a4589f144" tabindex="-1" value=""></div>
                <div class="clear"><input type="submit" class="button" value="Sign up" name="subscribe" id="mc-embedded-subscribe"></div>
            </div>
        </form>
    </div>
</div>

<!-- end newsleter modal -->



<!-- footer.html -->
<footer id="footer">
    <div class="footer-top">
        <a class="logo" href="https://www.scylladb.com"><img src="../_static/img/logo-scylla-horizontal-RGB.svg" alt=""></a>
        <div class="footer-links">
            <a class="link" href="https://docs.scylladb.com">Docs</a>
            <a class="link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
            <a class="link" href="https://www.scylladb.com/company/">About Us</a>
            <a class="link button" href="https://github.com/scylladb/scylla/issues/new?title=Issue in page Ports and protocols in Scylla&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://scylla.docs.scylladb.com/master/design-notes/protocols%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix" target="_blank">
                Report an issue on this page</a>
        </div>
        <div class="footer-actions">
            <a class="link-icon" href="https://github.com/ScyllaDB" target="_blank">
                <span class="icon-github2"></span></a>
            <a class="link-icon" href="https://twitter.com/ScyllaDB" target="_blank">
                <span class="icon-twitter"></span></a>
            <a class="link-icon" href="https://www.linkedin.com/company/scylladb"  target="_blank">
                <span class="icon-linkedin2"></span></a>
            <a class="link-icon" href="https://www.facebook.com/scylladb/" target="_blank">
                <span class="icon-facebook"></span></a>
        </div>
    </div>

    <div class="footer-bottom">
        <div class="footer-info">
            <div class="footer-copyright">
                &#169; 2021, ScyllaDB. All rights reserved.
            </div>
            <div class="footer-last-updated">
                Last updated on 11 May 2021.
            </div>
            <div class="footer-version">
                Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
                &amp; <a href="https://pypi.org/project/sphinx-scylladb-theme">ScyllaDB Theme 0.1.23</a>
            </div>
        </div>
        <div class="footer-links">
        </div>
    </div>
</footer>
<!-- end footer.html -->

<!-- bodyscripts.html -->
<!-- at the end of the BODY --> 
<script src="../_static/js/vendor/jquery.js"></script>
<script src="../_static/js/vendor/jquery.cookie.min.js"></script>
<script src="../_static/expertrec.js"></script>
<script src="../_static/js/foundation/foundation.js"></script>
<script src="../_static/js/foundation/foundation.topbar.js"></script>
<script src="../_static/app.js"></script>
<script>
    $(document).foundation();
</script>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <!-- end bodyscripts.html -->
</body>
</html>